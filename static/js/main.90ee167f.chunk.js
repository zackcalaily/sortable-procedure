(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var r=n(14),a=n(12),i=n(1),o=n(5),c=n(6),s=n(8),d=n(7),p=n(9),l=n(2),u=n(0),m=n.n(u),v=n(25),h=n.n(v),f=n(31),b=n.n(f),g=n(3),O=n(13),x=n(50);function j(){var e=Object(l.a)(["\n    display: block;\n    width: 100%;\n"]);return j=function(){return e},e}function E(){var e=Object(l.a)(["\n    outline: none;\n    background-color: #fff;\n    border: 1px solid #dedce0;\n    max-height: 2.5rem;\n    color: #536171;\n    font-size: .875rem;\n    padding: .656rem;\n    margin: 0;\n    width: 90%;\n"]);return E=function(){return e},e}var y=g.a.input(E()),w=g.a.label(j()),k=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).toggleEditingState=function(){n.setState({isEditing:!n.state.isEditing})},n.onChange=function(){n.setState({text:n.input.value}),n.props.update(n.props.type,n.props.id,n.props.field,n.input.value)},n.onFocus=function(){n.toggleEditingState()},n.onKeyDown=function(e){"Enter"===e.key&&n.toggleEditingState()},n.state={isEditing:n.props.isEditing||!1,text:n.props.text||""},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.state.isEditing?m.a.createElement(y,{type:"text",placeholder:this.props.placeholder,value:this.state.text,ref:function(t){e.input=t},onChange:this.onChange,onBlur:this.onFocus,onKeyDown:this.onKeyDown,autoFocus:!0}):m.a.createElement(w,{onClick:this.onFocus},this.state.text||this.props.placeholder)}}]),t}(m.a.Component);function C(){var e=Object(l.a)(["\n    background-color: transparent;\n    border: 0;\n    cursor: pointer;\n    display: inline-block;\n    padding: 0;\n    margin-left: 40px;\n"]);return C=function(){return e},e}function S(){var e=Object(l.a)(["\n    flex: 1 1 0;\n    padding-right: 1.25rem;\n    color: #8091a5;\n    font-size: .875rem;\n"]);return S=function(){return e},e}function z(){var e=Object(l.a)(["\n    display: flex;\n    margin-bottom: .75rem;\n"]);return z=function(){return e},e}function P(){var e=Object(l.a)(["\n    display: block;\n    flex: 1 1 0;\n    overflow: hidden;\n    padding: .875rem;\n    margin-left: 1.25rem;\n    height: 100%;\n"]);return P=function(){return e},e}function D(){var e=Object(l.a)(["\n    display: flex;\n    align-items: center;\n    background-color: #f7f9fa;\n    border: 0;\n    border-right: 1px solid #d3dce0;\n    cursor: grab;\n    height: 100%;\n    padding: 0;\n    position: absolute;\n    transition: background-color .2s ease-in-out;\n    width: 1.25rem;\n\n    &:hover,\n    &:focus {\n        background-color: #e5ebed;\n    }\n\n    span {\n        display: flex;\n        align-items: center;\n        height: 100%;\n        left: 0;\n        outline: 0;\n        position: absolute;\n        top: 0;\n        width: 100%;\n        overflow: hidden;\n    }\n\n    svg {\n        fill: #8091a5;\n        height: 18px;\n        width: 18px;\n    }\n"]);return D=function(){return e},e}function A(){var e=Object(l.a)(["\n    background-color: #fff;\n    border: 1px solid #d3dce0;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, .08);\n    box-sizing: border-box;\n    cursor: pointer;\n    display: flex;\n    font-size: .875rem;\n    min-height: 5.25rem;\n    line-height: 1.5;\n    margin-top: 12px;\n    position: relative;\n    text-decoration: none;\n    transition: box-shadow .2s ease-in-out, border-color: .2s ease-in-out;\n\n    &:hover,\n    &:focus {\n        border-color: #5b9fef;\n    }\n"]);return A=function(){return e},e}var I=g.a.div(A()),R=g.a.a(D()),F=g.a.div(P()),H=g.a.div(z()),M=g.a.div(S()),B=g.a.div(C()),N=n(53),V=n.n(N),L=n(54),K=n.n(L);function U(){var e=Object(l.a)(["\n    display: block;\n    width: 100%;\n"]);return U=function(){return e},e}function J(){var e=Object(l.a)(["\n    border-color: #3072be;\n    background-image: linear-gradient(0deg, #3c80cf, #5b9fef);\n    background-size: 100% 200%;\n    border: .0625rem solid #c3cfd5;\n    font-size: .875rem;\n    transition: background .2s ease-in-out, opacity: .2 ease-in-out, border-color: .2s ease-in-out;\n    height: 2.5rem;\n    padding: 0 .875rem;\n    color: #f7f9fa;\n    margin-top: 5px;\n"]);return J=function(){return e},e}var T=g.a.button(J()),_=g.a.label(U()),Y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).toggleEditingState=function(){n.setState({isEditing:!n.state.isEditing})},n.stripHtml=function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""},n.onChange=function(e,t){n.setState({text:t.getData()}),n.props.update(n.props.type,n.props.id,n.props.field,t.getData())},n.onFocus=function(){n.toggleEditingState()},n.onKeyDown=function(e){"Enter"===e.key&&n.toggleEditingState()},n.state={isEditing:n.props.isEditing||!1,text:n.props.text||""},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.isEditing?m.a.createElement(m.a.Fragment,null,m.a.createElement(K.a,{editor:V.a,data:this.state.text,onChange:this.onChange,onBlur:this.onFocus,autoFocus:!0}),m.a.createElement(T,{onClick:this.onFocus},"Save Changes")):m.a.createElement(_,{onClick:this.onFocus},this.stripHtml(this.state.text)||this.props.placeholder)}}]),t}(m.a.Component);function q(){var e=Object(l.a)(["\n    color: #2a3039;\n    font-weight: bold;\n    line-height: 1.5;\n    margin: 0;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    word-break: break-word;\n    white-space: nowrap;\n"]);return q=function(){return e},e}var G=g.a.div(q()),Q=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement(O.b,{draggableId:this.props.step.id,index:this.props.index},function(t){return m.a.createElement(I,Object.assign({},t.draggableProps,{ref:t.innerRef}),m.a.createElement(R,t.dragHandleProps,m.a.createElement("span",null,m.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},m.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),m.a.createElement("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})))),m.a.createElement(F,null,m.a.createElement(H,null,m.a.createElement(M,null,m.a.createElement(k,{text:e.props.step.name,placeholder:"Placeholder Step Name",type:"step",field:"name",id:e.props.step.id,update:e.props.update})),m.a.createElement(B,{onClick:function(){return e.props.onRemoveClick("step",e.props.activityId,e.props.step.id)}},m.a.createElement("i",{className:"fa fa-remove"}))),m.a.createElement(G,null,m.a.createElement(Y,{text:e.props.step.details,placeholder:"Placeholder Step Details",type:"step",field:"details",id:e.props.step.id,update:e.props.update}))))})}}]),t}(m.a.Component),W=n(59),X=n.n(W);function Z(){var e=Object(l.a)(["\n    color: #2a3039;\n    border-image-source: url(",");\n    border-image-repeat: round;\n    border-image-slice: 1 1;\n    border-image-width: 0 0 1px 0;\n    border-color: transparent;\n    border-style: solid;\n    background-color: transparent;\n    padding: 0 2px;\n"]);return Z=function(){return e},e}function $(){var e=Object(l.a)(["\n    height: 18px;\n    width: 18px;\n    fill: #3c80cf;\n    margin-right: 4px;\n"]);return $=function(){return e},e}function ee(){var e=Object(l.a)(["\n    background: none;\n    border: 0;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    padding: 0;\n    margin: 0;\n    color: #3c80cf;\n    text-decoration: underline;\n\n    &:hover {\n        color: #2a3039;\n    }\n\n    &:hover svg {\n        fill: #2a3039;\n    }\n"]);return ee=function(){return e},e}function te(){var e=Object(l.a)(["\n    display: flex;\n    align-items: center;\n\n    button {\n        margin-right: 20px;\n    }\n"]);return te=function(){return e},e}var ne=g.a.div(te()),re=g.a.button(ee()),ae=g.a.svg($()),ie=g.a.input(Z(),X.a);function oe(){var e=Object(l.a)(["\n    min-height: 2.5rem;\n    flex-grow: 1;\n"]);return oe=function(){return e},e}var ce=g.a.div(oe()),se=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).onIncrementStepChange=function(e){var t=e.target.value.toLowerCase();"e"===t?t=n.state.increment.step:t<n.state.increment.min?t=n.state.increment.min:t>n.state.increment.max&&(t=n.state.increment.max),n.setState({increment:Object(i.a)({},n.state.increment,{step:t})})},n.state={increment:{step:1,min:1,max:10}},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement(O.b,{draggableId:this.props.activity.id,index:this.props.index},function(t){return m.a.createElement(I,Object.assign({},t.draggableProps,{ref:t.innerRef}),m.a.createElement(R,t.dragHandleProps,m.a.createElement("span",null,m.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},m.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),m.a.createElement("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})))),m.a.createElement(F,null,m.a.createElement(H,null,m.a.createElement(M,null,m.a.createElement(k,{text:e.props.activity.name,placeholder:"Placeholder Activity Name",type:"activity",field:"name",id:e.props.activity.id,update:e.props.update})),m.a.createElement(ne,null,m.a.createElement(re,{onClick:function(){return e.props.onAddStepClick(e.props.activity.id,e.state.increment.step)}},m.a.createElement(ae,{height:"18",viewBox:"0 0 24 24",width:"18",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),m.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),"Create ",e.state.increment.step," new ",e.state.increment.step>1?"Steps":"Step"),m.a.createElement(ie,{type:"number",min:e.state.increment.min,max:e.state.increment.max,value:e.state.increment.step,onChange:e.onIncrementStepChange})),m.a.createElement(B,{onClick:function(){return e.props.onRemoveClick("activity",e.props.activity.id)}},m.a.createElement("i",{className:"fa fa-remove"}))),m.a.createElement(O.c,{droppableId:e.props.activity.id,type:"step"},function(t){return m.a.createElement(ce,Object.assign({},t.droppableProps,{ref:t.innerRef}),e.props.steps.map(function(t,n){return m.a.createElement(Q,{key:t.id,activityId:e.props.activity.id,step:t,index:n,onRemoveClick:e.props.onRemoveClick,update:e.props.update})}),t.placeholder)})))})}}]),t}(m.a.Component);n(135),n(136);function de(){var e=Object(l.a)([" \n    margin-top: 12px;\n"]);return de=function(){return e},e}var pe=g.a.div(de()),le=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).detachExternalChangeHandler=null,n.onIncrementStepChange=function(e){var t=e.target.value.toLowerCase();"e"===t?t=n.state.increment.step:t<n.state.increment.min?t=n.state.increment.min:t>n.state.increment.max&&(t=n.state.increment.max),n.setState({increment:Object(i.a)({},n.state.increment,{step:t})})},n.onAddActivityClick=function(e){for(var t=Object(i.a)({},n.state.procedure.activities),r=Object(a.a)(n.state.procedure.activityOrder),o=0;o<e;o++){var c=b.a.generate();t[c]={id:c,name:null,stepOrder:[]},r.push(c)}var s=Object(i.a)({},n.state.procedure,{activities:t,activityOrder:r});n.updateProcedure(s)},n.onAddStepClick=function(e,t){for(var o=Object(i.a)({},n.state.procedure.activities)[e],c=Object(i.a)({},n.state.procedure.steps),s=Object(a.a)(o.stepOrder),d=0;d<t;d++){var p=b.a.generate();c[p]={id:p,name:null,details:null},s.push(p)}var l=Object(i.a)({},n.state.procedure.activities[o.id],{stepOrder:s}),u=Object(i.a)({},n.state.procedure,{steps:c,activities:Object(i.a)({},n.state.procedure.activities,Object(r.a)({},o.id,l))});n.updateProcedure(u)},n.onRemoveClick=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("activity"===e){var c=n.state.procedure.activities[t];c.stepOrder.length>0?n.props.sdk.dialogs.openConfirm({title:"Remove ".concat(c.name||"Untitled","?"),message:'The activity "'.concat(c.name||"Untitled",'" has ').concat(c.stepOrder.length," procedure ").concat(c.stepOrder.length>1?"steps":"step",".\n                        Deleting this activity will also delete all the steps. Do you want to proceed?"),confirmLabel:"Yes, delete the activity and its steps",cancelLabel:"Nevermind"}).then(function(e){!0===e&&n.removeActivity(t)}):n.removeActivity(t)}else if("step"===e){var s=Object(i.a)({},n.state.procedure.activities)[t],d=Object(a.a)(s.stepOrder),p=Object(i.a)({},n.state.procedure.steps);delete p[o];var l=d.filter(function(e){return e!==o}),u=Object(i.a)({},s,{stepOrder:l}),m=Object(i.a)({},n.state.procedure,{steps:p,activities:Object(i.a)({},n.state.procedure.activities,Object(r.a)({},u.id,u))});n.updateProcedure(m)}},n.onExternalChange=function(e){n.setState({procedure:e})},n.onDragStart=function(){n.props.sdk.window.stopAutoResizer()},n.onDragEnd=function(e){var t=e.destination,o=e.source,c=e.draggableId,s=e.type;if(t&&(t.droppableId!==o.droppableId||t.index!==o.index)){if("activity"===s){var d=Object(a.a)(n.state.procedure.activityOrder);d.splice(o.index,1),d.splice(t.index,0,c);var p=Object(i.a)({},n.state.procedure,{activityOrder:d});n.updateProcedure(p)}else{var l=n.state.procedure.activities[o.droppableId],u=n.state.procedure.activities[t.droppableId];if(l===u){var m=Object(a.a)(l.stepOrder);m.splice(o.index,1),m.splice(t.index,0,c);var v=Object(i.a)({},l,{stepOrder:m}),h=Object(i.a)({},n.state.procedure,{activities:Object(i.a)({},n.state.procedure.activities,Object(r.a)({},v.id,v))});n.updateProcedure(h)}else{var f,b=Object(a.a)(l.stepOrder),g=Object(a.a)(u.stepOrder);b.splice(o.index,1),g.splice(t.index,0,c);var O=Object(i.a)({},l,{stepOrder:b}),x=Object(i.a)({},u,{stepOrder:g}),j=Object(i.a)({},n.state.procedure,{activities:Object(i.a)({},n.state.procedure.activities,(f={},Object(r.a)(f,O.id,O),Object(r.a)(f,x.id,x),f))});n.updateProcedure(j)}}n.props.sdk.window.startAutoResizer()}},n.updateProcedure=function(e){n.setState({procedure:e}),n.props.sdk.field.setValue(e)},n.removeActivity=function(e){var t=Object(i.a)({},n.state.procedure.activities),r=Object(a.a)(n.state.procedure.activityOrder);delete t[e];var o=r.filter(function(t){return t!==e}),c=Object(i.a)({},n.state.procedure,{activities:t,activityOrder:o});n.updateProcedure(c)},n.update=function(e,t,r,a){if("activity"===e){var o=Object(i.a)({},n.state.procedure.activities);o[t][r]=a;var c=Object(i.a)({},n.state.procedure,{activities:o});n.updateProcedure(c)}else if("step"===e){var s=Object(i.a)({},n.state.procedure.steps);s[t][r]=a;var d=Object(i.a)({},n.state.procedure,{steps:s});n.updateProcedure(d)}},n.state={procedure:e.sdk.field.getValue()||{activities:{},activityOrder:[],steps:{}},increment:{step:1,min:1,max:3}},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.sdk.window.startAutoResizer(),this.detachExternalChangeHandler=this.props.sdk.field.onValueChanged(this.onExternalChange)}},{key:"render",value:function(){var e=this;return m.a.createElement(pe,null,m.a.createElement(ne,null,m.a.createElement(re,{onClick:function(){return e.onAddActivityClick(e.state.increment.step)}},m.a.createElement(ae,{height:"18",viewBox:"0 0 24 24",width:"18",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),m.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),"Create ",this.state.increment.step," new ",this.state.increment.step>1?"Activities":"Activity"),m.a.createElement(ie,{type:"number",min:this.state.increment.min,max:this.state.increment.max,value:this.state.increment.step,onChange:this.onIncrementStepChange})),m.a.createElement(O.a,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},m.a.createElement(O.c,{droppableId:"activities",type:"activity"},function(t){return m.a.createElement(pe,Object.assign({},t.droppableProps,{ref:t.innerRef}),e.state.procedure.activityOrder.map(function(t,n){var r=e.state.procedure.activities[t],a=r.stepOrder.map(function(t){return e.state.procedure.steps[t]});return m.a.createElement(se,{key:r.id,activity:r,steps:a,index:n,onAddStepClick:e.onAddStepClick,onRemoveClick:e.onRemoveClick,update:e.update})}),t.placeholder)})))}}]),t}(m.a.Component);console.clear(),Object(x.init)(function(e){h.a.render(m.a.createElement(le,{sdk:e}),document.getElementById("root"))})},59:function(e,t,n){e.exports=n.p+"static/media/dotted-border.06dcc64a.svg"},62:function(e,t,n){e.exports=n(137)},75:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=75}},[[62,1,2]]]);
//# sourceMappingURL=main.90ee167f.chunk.js.map